<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright (C) 2015 jlgranda

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
                template="/WEB-INF/templates/fede_template.xhtml">
    <ui:define name="head">
        <o:importConstants type="org.jlgranda.fede.model.document.DocumentType" />
        <script type="text/javascript">
            function skinChart() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#8E24AA', '#C6FF00'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#F5F5F5',
                    shadow: false,
                };
                this.cfg.axesDefaults = {
                    rendererOptions: {
                        textColor: '#546E7A'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    markerOptions: {
                        shadow: false
                    }
                }
            }

            function skinPie() {
                this.cfg.seriesColors = ['#dae8ef', '#27aae1', '#33ccff', '#9fadb5'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#eaeaea',
                    gridLineColor: '#e5ebf0',
                    shadow: false,
                    borderWidth: 0
                };
                this.cfg.seriesDefaults.shadow = false;
            }
        </script>
        <style type="text/css">
            .jqplot-target, .jqplot-axis {
                color: #546E7A;
            }
        </style>

    </ui:define>

    <ui:define name="subheader">
        #{i18n['Invoices']}#{'/'}#{i18n['Dashboard']}
    </ui:define>

    <ui:define name="content">
        <!-- Left Column -->
        <div class="Container70 Responsive100">

            <!-- Section 1 -->
            <div class="Container100">
                <div class="ContainerIndent">
                    <div class="Card ShadowEffect HeiAutoOnMobile" style="min-height:275px;">
                        <h:form>
                            <p:poll interval="#{settingHome.getValue('app.fede.sales.dashboard.refreshtime', '20')}" listener="#{invoiceHome.clear()}" update="@all" widgetVar="pol" oncomplete="refresh();" /> 
                            <h2 class="CardTopic">#{i18n['app.fede.chart']}</h2>
                            <div class="SeparatorFull"></div>
                            <div class="Card HeiAutoOnMobile">
                                <label class="Gray">#{i18n['Start']}&nbsp;</label>
                                <p:calendar value="#{invoiceHome.start}" class="input-sm">
                                    <p:ajax event="dateSelect" oncomplete="form.submit();" listener="#{invoiceHome.cleanChartModels()}"/>
                                </p:calendar>
                                <label class="Gray">#{i18n['End']}&nbsp;</label>
                                <p:calendar value="#{invoiceHome.end}" class="input-sm">
                                    <p:ajax event="dateSelect" oncomplete="form.submit();" listener="#{invoiceHome.cleanChartModels()}"/>
                                </p:calendar>
                            </div>
                            <div class="EmptyBox10"></div>
                            <h3 class="CardTopic">#{i18n['app.fede.chart.salesvspurchases']}</h3>
                            <div class="Container100 Responsive100">
                                <p:chart type="line" model="#{invoiceHome.balanceLineChartModel}" style="height:300px" responsive="true"/>
                            </div>
                            <div class="EmptyBox10"></div>
                            <h3 class="CardTopic">#{i18n['app.fede.chart.products']}</h3>
                            <div class="Container100 Responsive100">
                                <p:chart type="bar" model="#{invoiceHome.buildTopBarChartModel()}" style="height:300px" responsive="true"/>
                            </div><!--
                            <div class="Container40 Responsive50">
                                <p:selectOneMenu id="console3" value="#{invoiceHome.frequency}" style="min-width:100px; width:120px; margin:10px 10px 5px 0px;" styleClass="WidAutoOnMobile">
                                    <f:selectItem itemLabel="Select Period" itemValue="" />
                                    <f:selectItem itemLabel="Daily" itemValue="Daily" />
                                    <f:selectItem itemLabel="Weekly" itemValue="Weekly" />
                                    <f:selectItem itemLabel="Monthly" itemValue="Monthly" />
                                    <f:selectItem itemLabel="Annual" itemValue="Annual" />
                                </p:selectOneMenu>
                            </div>-->
<!--                            <div class="EmptyBox20"></div>
                            <p:tabView style="margin: 0 -20px 0 -20px; border:none 0px;">
                                <p:tab title="#{i18n['PreInvoiced']}">
                                    <div class="Container100">
                                        <div class="Container100 Responsive100">
                                            <div class="ContainerIndent">
                                                <div class="Container100 Fs22 BoldGray FontRobotoRegular">#{i18n['app.fede.lastsale']}</div>
                                                <div class="EmptyBox20"></div>
                                                <div class="Container60 Fs50 FontRobotoLight Orange">
                                                    <span class="DispBlock">
                                                        #{invoiceHome.lastPreInvoice.summary}
                                                    </span>
                                                    <span class="Gray Fs16 FontRobotoLight DispBlock">#{i18n['ride.infoFactura.Total']} - <h:outputText value="#{invoiceHome.lastPreInvoice.total}">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>
                                                    </span>
                                                    <span class="Gray Fs12 FontRobotoLight DispBlock">#{i18n['common.createby']} - #{invoiceHome.lastPreInvoice.author.firstname}, #{invoiceHome.lastPreInvoice.author.surname}</span>
                                                    <span class="Gray Fs12 FontRobotoLight DispBlock">#{i18n['common.crationDate']} - #{invoiceHome.lastPreInvoice.createdOn}</span>
                                                </div>
                                                <div class="Container40">
                                                    <p:button value="#{i18n['New']}" styleClass="RedButton Fright" outcome="/pages/fede/sales/invoice.jsf" style="width:75%"/>
                                                    <div class="EmptyBox5"></div>
                                                    <p:button value="#{i18n['app.fede.collect']}" 
                                                              styleClass="CyanButton Fright" style="width:75%"
                                                              outcome="/pages/fede/sales/invoice.jsf?invoiceId=#{invoiceHome.lastPreInvoice.id}"/>
                                                </div>
                                                <div class="EmptyBox10"></div>
                                                <div class="Separator"></div>
                                                <div class="EmptyBox10"></div>
                                                <div class="Container100 Fs22 BoldGray FontRobotoRegular">#{i18n['app.fede.recentlysales']}</div>
                                                <div class="EmptyBox10"></div>
                                                <ui:repeat value="#{invoiceHome.findInvoices(null, DocumentType.PRE_INVOICE, settingHome.getValue('fede.dashboard.timeline.length', '5'), invoiceHome.start, invoiceHome.end)}" var="entity">
                                                    <div class="Container100">
                                                        <h:outputText value="#{entity.summary}" styleClass="Fs18 BoldGray FontRobotoLight">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>&nbsp;
                                                        <h:outputText value="#{entity.total}" styleClass="Fs16 BoldGray FontRobotoLight">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>&nbsp;
                                                        <h:outputText value="#{entity.createdOn}" styleClass="Fs12 BoldGray FontRobotoLight"></h:outputText>&nbsp;
                                                        <h:outputText value="#{entity.author.firstname}, #{entity.author.surname}" styleClass="Fs10 BoldGray FontRobotoLight"></h:outputText>
                                                    </div>
                                                </ui:repeat>
                                                <div class="EmptyBox10"></div>
                                                <div class="Separator"></div>
                                                <div class="EmptyBox10"></div>
                                                <div class="TexAlCenter DispBlock">
                                                    <p:button value="#{i18n['ShowAll']}" 
                                                              styleClass="OrangeButton White Fs14" icon="fa fa-table"
                                                              outcome="/pages/fede/sales/invoices.jsf"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </p:tab>
                                <p:tab title="#{i18n['Invoiced']}">
                                    <div class="Container100">
                                        <div class="Container100 Responsive100">
                                            <div class="ContainerIndent">
                                                <div class="Container100 Fs22 BoldGray FontRobotoRegular">#{i18n['app.fede.lastinvoice']}</div>
                                                <div class="EmptyBox20"></div>
                                                <div class="Container60 Fs50 FontRobotoLight Orange">
                                                    <span class="DispBlock">
                                                        #{invoiceHome.lastInvoice.summary}
                                                    </span>
                                                    <span class="Gray Fs16 FontRobotoLight DispBlock">#{i18n['ride.infoFactura.Total']} - <h:outputText value="#{invoiceHome.lastInvoice.total}">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>
                                                    </span>
                                                    <span class="Gray Fs12 FontRobotoLight DispBlock">#{i18n['common.createby']} - #{invoiceHome.lastInvoice.author.firstname}, #{invoiceHome.lastInvoice.author.surname}</span>
                                                    <span class="Gray Fs12 FontRobotoLight DispBlock">#{i18n['common.crationDate']} - #{invoiceHome.lastInvoice.createdOn}</span>
                                                </div>
                                                <div class="Container40">
                                                    <p:button value="#{i18n['New']}" styleClass="RedButton Fright" outcome="/pages/fede/sales/invoice.jsf" style="width:75%"/>
                                                </div>
                                                <div class="EmptyBox10"></div>
                                                <div class="Separator"></div>
                                                <div class="EmptyBox10"></div>
                                                <div class="Container100 Fs22 BoldGray FontRobotoRegular">#{i18n['app.fede.recentlyinvoice']}</div>
                                                <div class="EmptyBox10"></div>
                                                <ui:repeat value="#{invoiceHome.findInvoices(null, DocumentType.INVOICE, settingHome.getValue('fede.dashboard.timeline.length', '5'), invoiceHome.start, invoiceHome.end)}" var="entity">
                                                    <div class="Container100">
                                                        <h:outputText value="#{entity.summary}" styleClass="Fs18 BoldGray FontRobotoLight">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>&nbsp;
                                                        <h:outputText value="#{entity.total}" styleClass="Fs16 BoldGray FontRobotoLight">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>&nbsp;
                                                        <h:outputText value="#{entity.createdOn}" styleClass="Fs12 BoldGray FontRobotoLight"></h:outputText>&nbsp;
                                                        <h:outputText value="#{entity.author.firstname}, #{entity.author.surname}" styleClass="Fs10 BoldGray FontRobotoLight"></h:outputText>
                                                    </div>
                                                </ui:repeat>
                                                <div class="EmptyBox10"></div>
                                                <div class="Separator"></div>
                                                <div class="EmptyBox10"></div>
                                                <div class="TexAlCenter DispBlock">
                                                    <p:button value="#{i18n['ShowAll']}" 
                                                              styleClass="OrangeButton White Fs14" icon="fa fa-table"
                                                              outcome="/pages/fede/sales/invoices.jsf"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </p:tab>
                                <p:tab title="#{i18n['common.purchases']}">
                                    <div class="Container100">
                                        <div class="Container100 Responsive100">
                                            <div class="ContainerIndent">
                                                <div class="Container100 Fs22 BoldGray FontRobotoRegular">#{i18n['app.fede.purchase.lasts']}</div>
                                                <div class="EmptyBox20"></div>
                                                <div class="Container60 Fs50 FontRobotoLight Orange">
                                                    <span class="DispBlock">
                                                        #{fedeAPI.summary(facturaElectronicaHome.ultimaFacturaElectronica)}
                                                    </span>
                                                    <span class="Gray Fs16 FontRobotoLight DispBlock">#{i18n['ride.infoFactura.Total']} - <h:outputText value="#{facturaElectronicaHome.ultimaFacturaElectronica.importeTotal}">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>
                                                    </span>
                                                    <span class="Gray Fs12 FontRobotoLight DispBlock">#{i18n['ride.no']} - #{facturaElectronicaHome.ultimaFacturaElectronica.code}</span>
                                                    <span class="Gray Fs12 FontRobotoLight DispBlock">#{i18n['common.createby']} - #{facturaElectronicaHome.ultimaFacturaElectronica.author.fullName}</span>
                                                    <span class="Gray Fs12 FontRobotoLight DispBlock">#{i18n['common.emissionDate']} - #{facturaElectronicaHome.ultimaFacturaElectronica.fechaEmision}</span>
                                                    <span class="Gray Fs12 FontRobotoLight DispBlock">#{i18n['common.emissionType']} - #{settingHome.getValue('enum.emissionType'.concat(facturaElectronicaHome.ultimaFacturaElectronica.emissionType), facturaElectronicaHome.ultimaFacturaElectronica.emissionType)}</span>
                                                </div>
                                                <div class="Container40">
                                                    <p:button value="#{i18n['New']}" styleClass="RedButton Fright" outcome="/pages/fede/factura.jsf" style="width:75%"/>
                                                </div>
                                                <div class="EmptyBox10"></div>
                                                <div class="Separator"></div>
                                                <div class="EmptyBox10"></div>
                                                <div class="Container100 Fs22 BoldGray FontRobotoRegular">#{i18n['app.fede.purchase.lasts']}</div>
                                                <div class="EmptyBox10"></div>
                                                <ui:repeat value="#{facturaElectronicaHome.sampleResultList}" var="entity">
                                                    <div class="Container100">
                                                        <h:outputText value="#{fedeAPI.summary(entity)}" styleClass="Fs18 BoldGray FontRobotoLight">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>&nbsp;
                                                        <h:outputText value="#{entity.importeTotal}" styleClass="Fs16 BoldGray FontRobotoLight">
                                                            <f:convertNumber type="currency"/>
                                                        </h:outputText>&nbsp;
                                                        <h:outputText value="#{entity.fechaEmision}" styleClass="Fs12 BoldGray FontRobotoLight"></h:outputText>&nbsp;
                                                        <h:outputText value="#{settingHome.getValue('enum.emissionType'.concat(entityemissionType), entity.emissionType)}" styleClass="Fs12 BoldGray FontRobotoLight"></h:outputText>&nbsp;
                                                        <h:outputText value="#{entity.author.fullName}" styleClass="Fs10 BoldGray FontRobotoLight"></h:outputText>
                                                    </div>
                                                </ui:repeat>
                                                <div class="EmptyBox10"></div>
                                                <div class="Separator"></div>
                                                <div class="EmptyBox10"></div>
                                                <div class="TexAlCenter DispBlock">
                                                    <p:button value="#{i18n['ShowAll']}" 
                                                              styleClass="OrangeButton White Fs14" icon="fa fa-table"
                                                              outcome="/pages/fede/inbox.jsf"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </p:tab>
                            </p:tabView>-->
                        </h:form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div class="Container30 Responsive100">

            <!-- Section 1 -->
            <div class="Container100">
                <div class="ContainerIndent">
                    <div class="Card ShadowEffect HeiAutoOnMobile">
                        <h:form>
                            <h2 class="CardTopic TexAlCenter">#{i18n['app.fede.applications']}</h2>
                            <div class="EmptyBox20"></div>

                            <div class="Container50 Responsive50">
                                <div class="ContainerIndent">
                                    <div class="Card SoftGrayBack TexAlCenter">
                                        <i class="icon-paper Fs50 BoldGray DispBlock"></i>
                                        <div class="EmptyBox5"></div>
                                        <span class="FontRobotoLight Fs18">#{i18n['Invoices']}</span>
                                        <div class="EmptyBox10"></div>
<!--                                        <p:commandButton value="#{i18n['common.create']}" actionListener="#{invoiceHome.showInvoiceForm()}" ajax="true"
                                                         styleClass="RedButton Fright" style="width:75%">
                                            <p:ajax event="dialogReturn" update="@form"
                                                    listener="#{invoiceHome.handleReturn}">
                                            </p:ajax>
                                        </p:commandButton>-->
                                        <p:button value="#{i18n['common.create']}" styleClass="RedButton" outcome="/pages/fede/sales/invoice.jsf"/>
                                    </div>
                                </div> 
                            </div>
                            
                            <div class="Container50 Responsive50">
                                <div class="ContainerIndent">
                                    <div class="Card SoftGrayBack TexAlCenter">
                                        <i class="icon-paper Fs50 BoldGray DispBlock"></i>
                                        <div class="EmptyBox5"></div>
                                        <span class="FontRobotoLight Fs18">#{i18n['common.purchases']}</span>
                                        <div class="EmptyBox10"></div>
                                        <p:button value="#{i18n['common.create']}" styleClass="RedButton" outcome="/pages/fede/factura.jsf"/>
                                    </div>
                                </div> 
                            </div>

                            <div class="Container50 Responsive50">
                                <div class="ContainerIndent">
                                    <div class="Card SoftGrayBack TexAlCenter">
                                        <i class="fa fa-cubes Fs50 BoldGray DispBlock"></i>
                                        <div class="EmptyBox5"></div>
                                        <span class="FontRobotoLight Fs18">#{i18n['app.fede.inventory']}</span>
                                        <div class="EmptyBox10"></div>
                                        <p:button value="#{i18n['common.admin']}" styleClass="RedButton" outcome="/pages/fede/inventory/dashboard.jsf"/>
                                    </div>
                                </div> 
                            </div>
                        </h:form>
                    </div>
                </div>
            </div>

            <!-- Section 2 -->
            <!--            <div class="Container100">
                            <div class="ContainerIndent">
                                <div class="Card ShadowEffect HeiAutoOnMobile">
                                    <h:form>
                                        <h2 class="CardTopic TexAlCenter">#{i18n['app.fede.GetInvoices']}</h2>
                                        <div class="EmptyBox20"></div>
            
                                        <div class="Container50 Responsive50">
                                            <div class="ContainerIndent">
                                                <div class="Card SoftGrayBack TexAlCenter">
                                                    <i class="fa fa-upload Fs50 BoldGray DispBlock"></i>
                                                    <div class="EmptyBox5"></div>
                                                    <span class="FontRobotoLight Fs18">#{i18n['FromFile']}</span>
                                                    <div class="EmptyBox10"></div>
                                                    <p:button value="#{i18n['Import']}" styleClass="GreenButton"/>
                                                </div>
                                            </div> 
                                        </div>
            
                                        <div class="Container50 Responsive50">
                                            <div class="ContainerIndent">
                                                <div class="Card SoftGrayBack TexAlCenter">
                                                    <i class="fa fa-link Fs50 BoldGray DispBlock"></i>
                                                    <div class="EmptyBox5"></div>
                                                    <span class="FontRobotoLight Fs18">#{i18n['FromURL']}</span>
                                                    <div class="EmptyBox10"></div>
                                                    <p:button value="#{i18n['Import']}" styleClass="GreenButton"/>
                                                </div>
                                            </div> 
                                        </div>
            
                                        <div class="Container50 Responsive50">
                                            <div class="ContainerIndent">
                                                <div class="Card SoftGrayBack TexAlCenter">
                                                    <i class="fa fa-inbox Fs50 BoldGray DispBlock"></i>
                                                    <div class="EmptyBox5"></div>
                                                    <span class="FontRobotoLight Fs18">#{i18n['FromEmail']}</span>
                                                    <div class="EmptyBox10"></div>
                                                    <p:button value="#{i18n['Import']}" styleClass="GreenButton"/>
                                                </div>
                                            </div> 
                                        </div>
                                    </h:form>
                                </div>
                            </div>
                        </div>-->
        </div>


    </ui:define>
    <ui:define name="script">
        <script type="text/javascript">
            //<![CDATA[
            function refresh() {
                location.reload(); // refresh page    

            }
            
            function skinChart() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#8E24AA', '#C6FF00', '#C0C0C0'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#F5F5F5',
                    shadow: false,
                };
                this.cfg.axesDefaults = {
                    rendererOptions: {
                        textColor: '#546E7A'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    markerOptions: {
                        shadow: false
                    }
                }
            }
            
            function skinBarChart() {
                this.cfg.shadow = false;
                this.cfg.title = '';
                this.cfg.seriesColors = ['#8E24AA', '#C6FF00', '#C0C0C0'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#ffffff',
                    gridLineColor: '#F5F5F5',
                    shadow: false,
                };
                this.cfg.axesDefaults = {
                    rendererOptions: {
                        textColor: '#546E7A'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    markerOptions: {
                        shadow: false
                    }
                }
            }
            //]]>
            
        </script>
    </ui:define>

</ui:composition>
